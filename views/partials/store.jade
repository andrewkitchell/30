div.main(ng-controller="ShoppingCartCtrl")
  form(action="/purchase", method="post")
    script(src="https://checkout.stripe.com/checkout.js"
    , class="stripe-button"
    , data-description="{{items.length}} language guides"
    , data-image="/images/guide-corner-squared.jpg"
    , data-key="pk_LzkJmgBXMs1mjt0WBrlEzrowncsB9"
    , data-quantity='{{items.length}}'
    , data-purchased_guides='Some Guides'
    , data-name="30 WORDS"
    , data-amount="{{total()}}")
    input(type="hidden", name="amount", value="{{total()}}")
    input(type="hidden", name="purchased_guides", value='Some Guides')
  //- div(ng-init="isHidden=false")
  //-   button(ng-click="isHidden=!isHidden") Show / Hide Element
  //-   div.my-show-hide-animation(ng-hide="isHidden") I am visible!

  div.shopping-cart(ng-show="invoice.items.length")

    div.total
      img.total-logo(src="/images/logo_30words_store.png")
      p Your Total:
      p {{ total() | currency:"$" }}
      //- form(action="/purchase", method="post")
      //-   script(src="https://checkout.stripe.com/v3/checkout.js"
      //-   , class="stripe-button"
      //-   , data-description="{{items.length}} language guides"
      //-   , data-image="/images/guide-corner-squared.jpg"
      //-   , data-key="pk_LzkJmgBXMs1mjt0WBrlEzrowncsB9"
      //-   , data-quantity='{{items.length}}'
      //-   , data-purchased_guides='Some Guides'
      //-   , data-name="30 WORDS"
      //-   , data-amount="{{total()}}")
      //-   input(type="hidden", name="amount", value="{{total()}}")
      //-   input(type="hidden", name="purchased_guides", value='Some Guides')

    div.all-languages-in-cart
      div.guide-in-cart-box(ng-repeat='item in invoice.items', ng-animate=" 'animate' ")
        div.guide-in-cart
          img(src='{{item.guide.image}}', width='80px')
          p {{ item.guide.language }}
          i.fa.fa-times-circle-o(ng-click="removeItem($index)")
          td
            input.guide-quantity(type="number", ng-model="item.qty", ng-required, placeholder='1')

  select.language-select(ng-model="searchparam")
    option(value="", selected) Choose Language
    option(ng-repeat="guide in guides", value="{{guide.language}}") {{guide.language}}

  div.all-guides
    div.guide-box(ng-repeat='guide in guides | filter: searchparam', ng-animate="'animate'")
      div.cover-box
        img.guide-cover(ng-src='{{guide.image}}')
        button.btn.btn-primary.add-to-cart(ng-click="addItem(guide)") Add to Cart

      div.guide-text
        a.guide-title(href="/store/{{guide.language}}") {{guide.language}}
        div.guide-description {{guide.description}}
